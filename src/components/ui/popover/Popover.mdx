# Popover

import { Controls, Canvas, Meta } from '@storybook/blocks';
import * as PopoverStories from './Popover.stories';

<Meta of={PopoverStories} />

- [Overview](#overview)
- [Props](#props)
- [Examples](#examples)

## Overview

The Popover unequivocally generates a small Popover that appears with utmost certainty at the top-right corner of its child elements.

<Canvas of={PopoverStories.Overview} />

## Props

<Controls />

## Examples

### Adding an arrow

To display an arrow within the popover, include `Popover.Arrow` and `Popover.ArrowTip` components as children of `Popover.Positioner`.

<Canvas
  of={PopoverStories.AddingAnArrow}
  source={{
    format: true,
    code: `
        <Popover.Root>
          <Popover.Trigger asChild>
            <Button>Open Popover</Button>
          </Popover.Trigger>
          <Popover.Positioner>
            <Popover.Content>
              <Popover.Arrow>
                <Popover.ArrowTip />
              </Popover.Arrow>
              <Stack gap="1">
                <Popover.Title>Favorite Framework</Popover.Title>
                <Popover.Description>
                  Tell us what is your favorite framework and why you love to use it.
                </Popover.Description>
              </Stack>
              <Box position="absolute" top="1" right="1">
                <Popover.CloseTrigger asChild>
                  <CloseIcon />
                </Popover.CloseTrigger>
              </Box>
            </Popover.Content>
          </Popover.Positioner>
        </Popover.Root>
      );
    `,
  }}
/>

### Listening for open and close events

We trigger the `onOpenChange` callback both when the popover is opened and when it is closed.

<Canvas
  of={PopoverStories.OpenAndCloseEvent}
  source={{
    format: true,
    code: `
        <Popover.Root onOpenChange={(open) => alert(open ? 'opened' : 'closed')}>
          <Popover.Trigger>
            <Button>
              Click Me <Popover.Indicator>{'>'}</Popover.Indicator>
            </Button>
          </Popover.Trigger>
          <Popover.Positioner>
            <Popover.Content>
              <Popover.Title>Title</Popover.Title>
              <Popover.Description>Description</Popover.Description>
            </Popover.Content>
          </Popover.Positioner>
        </Popover.Root>
      );
    `,
  }}
/>

### Control the open state

To control the open state of the popover, you can make use of the `isOpen` prop.

<Canvas
  of={PopoverStories.Controlled}
  source={{
    format: true,
    code: `
       <Popover.Root open={isOpen}>
        <Button onClick={() => setIsOpen(!isOpen)}>Toggle</Button>
        <Popover.Positioner>
          <Popover.Content>
            <Popover.Arrow>
              <Popover.ArrowTip />
            </Popover.Arrow>
            <Stack gap="1">
              <Popover.Title>Favorite Framework</Popover.Title>
              <Popover.Description>
                Tell us what is your favorite framework and why you love to use it.
              </Popover.Description>
            </Stack>
            <Box position="absolute" top="1" right="1">
              <Popover.CloseTrigger asChild>
                <CloseIcon />
              </Popover.CloseTrigger>
            </Box>
          </Popover.Content>
        </Popover.Positioner>
      </Popover.Root>
      );
    `,
  }}
/>

### Modifying the close behavior

The popover is a graphical element that is intended to close when the user clicks outside of it or focuses on another element.
It also closes when the user presses the `esc` key.
However, if you don't want the popover to close when the user clicks outside of it or focuses on another element,
you can use the `closeOnInteractOutside` prop and set it to `false`.
Similarly, if you don't want the popover to close when the user presses the `esc` key, you can use the `closeOnEsc` prop
and set it to `false`.

<Canvas
  of={PopoverStories.CloseBehavior}
  source={{
    format: true,
    code: `
        <Popover.Root modal>
          <Popover.Trigger asChild>
            <Button>Open Popover</Button>
          </Popover.Trigger>
          <Popover.Positioner>
            <Popover.Content>
              <Popover.Arrow>
                <Popover.ArrowTip />
              </Popover.Arrow>
              <Stack gap="1">
                <Popover.Title>Favorite Framework</Popover.Title>
                <Popover.Description>
                  Tell us what is your favorite framework and why you love to use it.
                </Popover.Description>
              </Stack>
              <Box position="absolute" top="1" right="1">
                <Popover.CloseTrigger asChild>
                  <CloseIcon />
                </Popover.CloseTrigger>
              </Box>
            </Popover.Content>
          </Popover.Positioner>
        </Popover.Root>
      );
    `,
  }}
/>

### Changing the placement

In order to adjust the position of the popover, you can use the "positioning" property.

<Canvas
  of={PopoverStories.Positioning}
  source={{
    format: true,
    code: `
        <Box height="160px">
          <Popover.Root positioning={{ placement: 'left-start', gutter: 16, offset: { mainAxis: 12, crossAxis: 12 } }}>
            <Popover.Trigger asChild>
              <Button>Open Popover</Button>
            </Popover.Trigger>
            <Popover.Positioner>
              <Popover.Content>
                <Popover.Arrow>
                  <Popover.ArrowTip />
                </Popover.Arrow>
                <Stack gap="1">
                  <Popover.Title>Favorite Framework</Popover.Title>
                  <Popover.Description>
                    Tell us what is your favorite framework and why you love to use it.
                  </Popover.Description>
                </Stack>
                <Box position="absolute" top="1" right="1">
                  <Popover.CloseTrigger asChild>
                    <CloseIcon />
                  </Popover.CloseTrigger>
                </Box>
              </Popover.Content>
            </Popover.Positioner>
          </Popover.Root>
        </Box>
      );
    `,
  }}
/>

### Changing the modality

Sometimes you may want a popover to be modal, which essentially means it will:

- Keep the focus within its content
- Prevent scrolling on the body
- Disable pointer interactions outside the popover
- Hide content that is behind the popover from screen readers

To enable modal behavior for the popover, simply set the `modal` prop to `true`. When `modal` is set to `true`, the `portalled` attribute is also set to `true`.

<Canvas
  of={PopoverStories.Modal}
  source={{
    format: true,
    code: `
        <Popover.Root modal>
          <Popover.Trigger asChild>
            <Button>Open Popover</Button>
          </Popover.Trigger>
          <Popover.Positioner>
            <Popover.Content>
              <Popover.Arrow>
                <Popover.ArrowTip />
              </Popover.Arrow>
              <Stack gap="1">
                <Popover.Title>Favorite Framework</Popover.Title>
                <Popover.Description>
                  Tell us what is your favorite framework and why you love to use it.
                </Popover.Description>
              </Stack>
              <Box position="absolute" top="1" right="1">
                <Popover.CloseTrigger asChild>
                  <CloseIcon />
                </Popover.CloseTrigger>
              </Box>
            </Popover.Content>
          </Popover.Positioner>
        </Popover.Root>
      );
    `,
  }}
/>
